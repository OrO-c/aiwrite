# AI 写作助手

一个智能的 Android 写作辅助应用，帮助用户快速生成不同风格的文本内容。

## 📝 核心功能

### 智能分段写作
- 输入一个主题，AI 自动生成 **3 种不同风格/角度的文本**
- 支持创意版、详细版、简洁版等多种风格
- 一次生成，多种选择

### 快速输入模式
- **模式1（磁贴+剪贴板）**：省电模式，适合偶尔使用
- **模式2（悬浮球+直接输入）**：高效模式，适合高频写作
- 一键复制或直接输入到任何应用

### 多场景适配
- 预设 **小红书文案、邮件模板、产品评价、日记助手** 等常见写作场景
- 支持自定义预设，满足个性化需求
- 智能适配不同写作风格

## 🎯 适合人群

- **社交媒体博主**：快速生成不同风格的文案
- **学生/办公族**：写邮件、报告、总结
- **电商用户**：商品评价、客服回复
- **内容创作者**：灵感启发、文案优化

## 🚀 主要特性

### 首次启动引导
1. **欢迎页**：功能介绍和模式对比
2. **工作模式选择**：根据使用习惯选择最适合的模式
3. **API配置**：支持 OpenAI、DeepSeek、Gemini 等多种AI服务
4. **完成设置**：自动启用对应功能

### 桌面配置中心
- **仪表盘**：显示最近生成记录和快捷操作
- **预设管理**：创建、编辑、删除自定义预设
- **模型设置**：切换AI提供商，调整参数
- **应用设置**：夜间模式、震动反馈等个性化配置

### 双模式工作流程

#### 模式1：磁贴+剪贴板
1. 下拉通知栏，点击 AI 写作磁贴
2. 选择预设，输入主题
3. 生成三种风格的文本
4. 点击选择心仪版本，自动复制到剪贴板
5. 在目标应用中粘贴使用

#### 模式2：悬浮球+直接输入
1. 点击屏幕边缘的悬浮球
2. 选择预设，输入主题  
3. 生成三种风格的文本
4. 点击选择版本，直接输入到当前应用
5. 无需手动复制粘贴，一步到位

## 🛠️ 技术架构

### 开发框架
- **语言**：Kotlin
- **UI框架**：Jetpack Compose
- **架构**：MVVM + Repository 模式
- **数据库**：Room
- **网络**：Retrofit + OkHttp
- **异步处理**：Kotlin Coroutines + Flow

### 核心组件
- **引导流程**：OnboardingActivity + 多页面引导
- **主界面**：MainActivity + 三页面导航（仪表盘/预设/设置）
- **磁贴服务**：WritingTileService + 快速设置集成
- **悬浮窗服务**：FloatingWindowService + 系统级悬浮
- **无障碍服务**：AccessibilityService + 文本直接输入
- **AI集成**：多提供商适配（OpenAI/DeepSeek/Gemini）

### 数据存储
- **用户偏好**：SharedPreferences + Gson序列化
- **预设管理**：Room数据库 + Flow响应式更新
- **历史记录**：Room数据库 + 分页加载
- **API配置**：加密存储，支持多提供商

## 🔧 环境要求

- **最低版本**：Android 7.0 (API 24)
- **目标版本**：Android 14 (API 34)
- **必需权限**：
  - 网络访问（API调用）
  - 通知权限（磁贴功能）
  - 悬浮窗权限（悬浮球模式）
  - 无障碍服务（直接输入模式）

## 📦 项目结构

```
app/src/main/java/com/aiwriter/assistant/
├── AIWriterApplication.kt                 # 应用程序主类
├── data/                                  # 数据层
│   ├── api/                              # API服务
│   ├── database/                         # 数据库和DAO
│   ├── model/                            # 数据模型
│   ├── preferences/                      # 偏好设置
│   └── repository/                       # 仓库层
├── service/                              # 系统服务
│   ├── AccessibilityService.kt          # 无障碍服务
│   ├── FloatingWindowService.kt         # 悬浮窗服务
│   └── WritingTileService.kt            # 磁贴服务
├── ui/                                   # 用户界面
│   ├── floating/                         # 悬浮窗界面
│   ├── main/                            # 主界面
│   ├── onboarding/                      # 引导界面
│   └── theme/                           # 主题样式
└── utils/                               # 工具类
    └── PermissionHelper.kt              # 权限管理
```

## 🎨 设计亮点

### 用户体验
- **弹性动画**：悬浮窗弹出时的弹性缩放效果
- **反馈动画**：文本复制后卡片轻微上浮+打勾动画
- **震动反馈**：悬浮球点击时的触觉反馈
- **自适应主题**：自动跟随系统深色模式

### 交互设计
- **拖拽悬浮球**：可自由移动到屏幕边缘任意位置
- **快速预设切换**：下拉菜单快速选择写作场景
- **三版本对比**：并排展示，方便快速选择
- **一键操作**：复制/插入操作一步完成

## 🔒 隐私安全

- **本地处理**：用户数据仅存储在本地设备
- **API密钥加密**：敏感信息加密存储
- **权限最小化**：仅申请必要权限
- **数据清除**：支持一键清除所有数据

## 📱 使用场景示例

### 小红书文案生成
1. 选择"小红书文案"预设
2. 输入"防晒霜测评"
3. 获得三种风格：
   - 💡 创意版：种草向，emoji丰富
   - 🔍 详细版：成分分析，专业详细  
   - ✂️ 简洁版：简明扼要，突出重点
4. 点击最适合的版本，直接发布

### 工作邮件回复
1. 选择"商务邮件"预设
2. 输入"项目延期说明"
3. 获得三种风格：
   - 正式版：规范表达，逻辑清晰
   - 委婉版：措辞温和，关系维护
   - 简洁版：要点明确，节省时间
4. 一键插入邮箱应用

## 🛡️ 权限说明

### 通知权限
- **用途**：显示快速设置磁贴
- **范围**：仅用于磁贴功能，不发送推送通知

### 悬浮窗权限  
- **用途**：显示悬浮球和写作界面
- **范围**：仅在用户主动触发时显示

### 无障碍服务
- **用途**：将生成的文本直接输入到其他应用
- **范围**：仅在用户选择"插入文本"时使用
- **安全**：不收集、不存储、不传输用户在其他应用中的任何信息

## 🔄 更新计划

### v1.1（规划中）
- [ ] 支持更多AI模型（Claude、文心一言）
- [ ] 添加文本编辑功能
- [ ] 支持语音输入
- [ ] 增加批量生成模式

### v1.2（规划中）
- [ ] 云端预设同步
- [ ] 团队协作功能
- [ ] 多语言支持
- [ ] 高级自定义选项

## 📄 开源协议

本项目采用 MIT 协议开源，详情请参阅 [LICENSE](LICENSE) 文件。

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 🏗️ 构建和部署

### GitHub Actions CI/CD

本项目配置了完整的 CI/CD 流水线：

- **🚀 自动发布**: 推送版本标签自动构建发布
- **🔧 多架构支持**: ARM64、ARM32、x86_64、x86、Universal
- **🔒 自动签名**: 安全的 APK 签名流程
- **🛡️ 安全扫描**: 定期依赖和安全检查

### 快速发布

```bash
# 创建版本标签自动触发构建
git tag v1.0.0
git push origin v1.0.0
```

### 手动构建

1. 访问 GitHub Actions 页面
2. 选择 "Build and Release APK"
3. 点击 "Run workflow" 并配置参数

详细说明请参考：[GitHub Actions 构建指南](./docs/GITHUB_ACTIONS_GUIDE.md)

## 📦 下载安装

### GitHub Releases

从 [Releases 页面](../../releases) 下载最新版本：

- **Universal APK**: 兼容所有设备（推荐）
- **ARM64**: 现代 Android 设备
- **ARM32**: 较老的 Android 设备
- **x86/x86_64**: 模拟器或特殊设备

### 架构选择指南

| 设备类型 | 推荐架构 | 文件大小 |
|----------|----------|----------|
| 不确定 | Universal | 较大 |
| 现代手机 | ARM64 | 较小 |
| 老旧手机 | ARM32 | 较小 |
| 模拟器 | x86/x86_64 | 较小 |

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 提交 [Issue](../../issues)
- 查看 [GitHub Actions 构建指南](./docs/GITHUB_ACTIONS_GUIDE.md)
- 参考 [APK 签名配置指南](./docs/SIGNING_SETUP.md)

---

**AI 写作助手** - 让写作更高效，让创意更自由！ ✨
